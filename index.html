<!doctype html>




<html class="theme-next pisces">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Labmen的研究所">
<meta property="og:url" content="http://labmain.com/index.html">
<meta property="og:site_name" content="Labmen的研究所">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Labmen的研究所">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: false,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://labmain.com/"/>


  <title> Labmen的研究所 </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Labmen的研究所</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">一些小文章</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/02/LLDB_debugging_skills/" itemprop="url">
                  LLDB调试技巧（整理）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-02T21:31:12+08:00" content="2016-11-02">
              2016-11-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="LLDB的基础使用"><a href="#LLDB的基础使用" class="headerlink" title="LLDB的基础使用"></a>LLDB的基础使用</h1><h2 id="help-lt-command-gt"><a href="#help-lt-command-gt" class="headerlink" title="help &lt; command &gt;"></a>help &lt; command &gt;</h2><p>最简单命令是<code>help</code>，它会列举出所有的命令。<br>例如: </p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">help print 或者 help thread。</div></pre></td></tr></table></figure>
<h2 id="print"><a href="#print" class="headerlink" title="print"></a>print</h2><p>缩写：<code>prin</code> or <code>pri</code> or <code>p</code></p>
<p>例如：</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) print count</div><div class="line">(<span class="built_in">NSUInteger</span>) $<span class="number">0</span> = <span class="number">99</span></div><div class="line">(lldb) print $<span class="number">0</span> + <span class="number">7</span></div><div class="line">(<span class="keyword">unsigned</span> <span class="keyword">long</span>) $<span class="number">1</span> = <span class="number">106</span></div></pre></td></tr></table></figure>
<blockquote>
<p>说明：(其实 print 是 <code>expression --</code> 的缩写)</p>
</blockquote>
<h3 id="打印变量"><a href="#打印变量" class="headerlink" title="打印变量"></a>打印变量</h3><ul>
<li>默认是10进制</li>
<li><p>十六进制</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) p/x <span class="number">16</span></div><div class="line"><span class="number">0x10</span></div></pre></td></tr></table></figure>
</li>
<li><p>二进制</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) p/t <span class="number">16</span></div><div class="line"><span class="number">0</span>b00000000000000000000000000010000</div><div class="line">(lldb) p/t (<span class="keyword">char</span>)<span class="number">16</span></div><div class="line"><span class="number">0</span>b00010000</div></pre></td></tr></table></figure>
</li>
</ul>
<p>你也可以使用 <code>p/c</code> 打印字符，或者 <code>p/s</code> 打印以空终止的字符串 (注：以 <code>&#39;\0&#39;</code> 结尾的字符串)。<br><a href="https://sourceware.org/gdb/onlinedocs/gdb/Output-Formats.html" target="_blank" rel="external">这里</a>是格式的完整清单。</p>
<h2 id="expression"><a href="#expression" class="headerlink" title="expression"></a>expression</h2><p>缩写：<code>e</code></p>
<p>例如:</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) expression count = <span class="number">42</span></div><div class="line">(<span class="built_in">NSUInteger</span>) $<span class="number">4</span> = <span class="number">42</span></div><div class="line">(lldb) print count </div><div class="line">(<span class="built_in">NSUInteger</span>) $<span class="number">5</span> = <span class="number">42</span></div></pre></td></tr></table></figure>
<h3 id="打印对象"><a href="#打印对象" class="headerlink" title="打印对象"></a>打印对象</h3><p>参数 <code>e -O --</code>(查看对象description 方法的结果)</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) p @[ <span class="string">@"foo"</span>, <span class="string">@"bar"</span> ]</div><div class="line">(<span class="built_in">NSArray</span> *) $<span class="number">8</span> = <span class="number">0x00007fdb9b71b3e0</span> <span class="string">@"2 objects"</span> </div><div class="line">(lldb) e -O -- $<span class="number">8</span> </div><div class="line">&lt;__NSArrayI <span class="number">0x7fdb9b71b3e0</span>&gt;(</div><div class="line">foo,</div><div class="line">bar</div><div class="line">)</div></pre></td></tr></table></figure>
<p>参数 <code>e -O --</code>，缩写是：<strong><code>po</code></strong></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) po $<span class="number">8</span></div><div class="line">&lt;__NSArrayI <span class="number">0x7fdb9b71b3e0</span>&gt;(</div><div class="line">foo,</div><div class="line">bar</div><div class="line">)</div><div class="line">(lldb) po <span class="string">@"lunar"</span></div><div class="line">lunar</div><div class="line">(lldb) p <span class="string">@"lunar"</span></div><div class="line">(<span class="built_in">NSString</span> *) $<span class="number">13</span> = <span class="number">0x00007fdb9d0003b0</span> <span class="string">@"lunar"</span></div></pre></td></tr></table></figure>
<h2 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h2><figure class="highlight"><table><tr><td class="code"><pre><div class="line">(lldb) e int $a = 2</div><div class="line">(lldb) p $a * 19</div><div class="line">38</div><div class="line">(lldb) e NSArray *$array = @[ @"Saturday", @"Sunday", @"Monday" ]</div><div class="line">(lldb) p [$array count]</div><div class="line">2</div><div class="line">(lldb) po [[$array objectAtIndex:0] uppercaseString]</div><div class="line">SATURDAY</div><div class="line">(lldb) p [[$array objectAtIndex:$a] characterAtIndex:0]</div><div class="line">error: no known method '-characterAtIndex:'; cast the message send to the method's return type</div><div class="line">error: 1 errors parsing expression</div></pre></td></tr></table></figure>
<p>但是<code>LLDB</code>无法确定涉及的类型，需要指定类型：</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) p (<span class="keyword">char</span>)[[$array objectAtIndex:$a] characterAtIndex:<span class="number">0</span>]</div><div class="line"><span class="string">'M'</span></div><div class="line">(lldb) p/d (<span class="keyword">char</span>)[[$array objectAtIndex:$a] characterAtIndex:<span class="number">0</span>]</div><div class="line"><span class="number">77</span></div></pre></td></tr></table></figure>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="Xcode上的流程控制按钮对应LLDB命令："><a href="#Xcode上的流程控制按钮对应LLDB命令：" class="headerlink" title="Xcode上的流程控制按钮对应LLDB命令："></a>Xcode上的流程控制按钮对应LLDB命令：</h3><p><img src="http://img.labmain.com/2016-11-02-120307.jpg" alt=""></p>
<p>从左到右，四个按钮分别是：<br><code>continue</code><br><code>step over</code><br><code>step into</code><br><code>step out</code></p>
<ul>
<li><p><code>process continue</code>命令对应 ：<code>continue</code>按钮<br>（别名<code>continue</code>，或直接缩写为<code>c</code>）</p>
</li>
<li><p><code>thread step-over</code>命令对应：<code>step over</code>按钮<br>（缩写：<code>next</code>或<code>n</code>）</p>
</li>
<li><p><code>thread step in</code>命令对应：<code>step into</code><br>（缩写：<code>step</code>或<code>s</code>）</p>
</li>
</ul>
<h3 id="Thread-Return命令"><a href="#Thread-Return命令" class="headerlink" title="Thread Return命令"></a>Thread Return命令</h3><p>它有一个可选参数，在执行时它会把可选参数加载进返回寄存器里，然后立刻执行返回命令，跳出当前栈帧。这意味这函数剩余的部分不会被执行。这会给 <code>ARC</code> 的引用计数造成一些问题，或者会使函数内的清理部分失效。但是在函数的开头执行这个命令，是个非常好的隔离这个函数，伪造返回值的方式 。</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) p i</div><div class="line">(<span class="keyword">int</span>) $<span class="number">0</span> = <span class="number">99</span></div><div class="line">(lldb) s</div><div class="line">(lldb) thread <span class="keyword">return</span> <span class="literal">NO</span></div><div class="line">(lldb) n</div><div class="line">(lldb) p even0</div><div class="line">(<span class="built_in">BOOL</span>) $<span class="number">2</span> = <span class="literal">NO</span></div><div class="line">(lldb) frame info</div><div class="line">frame <span class="meta">#0: 0x00000001009a5cc4 DebuggerDance`main + 52 at main.m:17</span></div></pre></td></tr></table></figure>
<h2 id="LLDB中的断点"><a href="#LLDB中的断点" class="headerlink" title="LLDB中的断点"></a>LLDB中的断点</h2><h3 id="breakpoint-list-或者-br-li-命令"><a href="#breakpoint-list-或者-br-li-命令" class="headerlink" title="breakpoint list (或者 br li) 命令"></a>breakpoint list (或者 br li) 命令</h3><h4 id="管理断点"><a href="#管理断点" class="headerlink" title="管理断点"></a>管理断点</h4><p>在<code>Xcode</code>里你可以点击单个断点来开启或关闭：<br>在 <code>LLDB</code> 中使用 <code>breakpoint enable &lt;breakpointID&gt;</code>和 <code>breakpoint disable &lt;breakpointID&gt;</code>：</p>
<figure class="highlight"><table><tr><td class="code"><pre><div class="line">(lldb) br li</div><div class="line">Current breakpoints:</div><div class="line">1: file = '/Users/arig/Desktop/DebuggerDance/DebuggerDance/main.m', line = 16, locations = 1, resolved = 1, hit count = 1</div><div class="line"></div><div class="line">  1.1: where = DebuggerDance`main + 27 at main.m:16, address = 0x000000010a3f6cab, resolved, hit count = 1</div><div class="line"></div><div class="line">(lldb) br dis 1</div><div class="line">1 breakpoints disabled.</div><div class="line">(lldb) br li</div><div class="line">Current breakpoints:</div><div class="line">1: file = '/Users/arig/Desktop/DebuggerDance/DebuggerDance/main.m', line = 16, locations = 1 Options: disabled</div><div class="line"></div><div class="line">  1.1: where = DebuggerDance`main + 27 at main.m:16, address = 0x000000010a3f6cab, unresolved, hit count = 1</div><div class="line"></div><div class="line">(lldb) br del 1</div><div class="line">1 breakpoints deleted; 0 breakpoint locations disabled.</div><div class="line">(lldb) br li</div><div class="line">No breakpoints currently set.</div></pre></td></tr></table></figure>
<h4 id="breakpoint-set-创建断点"><a href="#breakpoint-set-创建断点" class="headerlink" title="breakpoint set 创建断点"></a>breakpoint set 创建断点</h4><figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) breakpoint set -f main.m -l <span class="number">16</span></div><div class="line">Breakpoint <span class="number">1</span>: where = DebuggerDance`main + <span class="number">27</span> at main.m:<span class="number">16</span>, address = <span class="number">0x000000010a3f6cab</span></div></pre></td></tr></table></figure>
<p>也可以使用缩写形式 <code>br</code>。虽然 <code>b</code> 是一个完全不同的命令 (<code>_regexp-break</code> 的缩写)，但恰好也可以实现和上面同样的效果。</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) b main.m:<span class="number">17</span></div><div class="line">Breakpoint <span class="number">2</span>: where = DebuggerDance`main + <span class="number">52</span> at main.m:<span class="number">17</span>, address = <span class="number">0x000000010a3f6cc4</span></div></pre></td></tr></table></figure>
<h5 id="创建一个在函数开始处的断点："><a href="#创建一个在函数开始处的断点：" class="headerlink" title="创建一个在函数开始处的断点："></a>创建一个在函数开始处的断点：</h5><p>C语言函数：</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) b isEven</div><div class="line">Breakpoint <span class="number">3</span>: where = DebuggerDance`isEven + <span class="number">16</span> at main.m:<span class="number">4</span>, address = <span class="number">0x000000010a3f6d00</span></div><div class="line">(lldb) br s -F isEven</div><div class="line">Breakpoint <span class="number">4</span>: where = DebuggerDance`isEven + <span class="number">16</span> at main.m:<span class="number">4</span>, address = <span class="number">0x000000010a3f6d00</span></div></pre></td></tr></table></figure>
<p>OC函数：</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) breakpoint set -F <span class="string">"-[NSArray objectAtIndex:]"</span></div><div class="line">Breakpoint <span class="number">5</span>: where = CoreFoundation`-[<span class="built_in">NSArray</span> objectAtIndex:], address = <span class="number">0x000000010ac7a950</span></div><div class="line">(lldb) b -[<span class="built_in">NSArray</span> objectAtIndex:]</div><div class="line">Breakpoint <span class="number">6</span>: where = CoreFoundation`-[<span class="built_in">NSArray</span> objectAtIndex:], address = <span class="number">0x000000010ac7a950</span></div><div class="line">(lldb) breakpoint set -F <span class="string">"+[NSSet setWithObject:]"</span></div><div class="line">Breakpoint <span class="number">7</span>: where = CoreFoundation`+[<span class="built_in">NSSet</span> setWithObject:], address = <span class="number">0x000000010abd3820</span></div><div class="line">(lldb) b +[<span class="built_in">NSSet</span> setWithObject:]</div><div class="line">Breakpoint <span class="number">8</span>: where = CoreFoundation`+[<span class="built_in">NSSet</span> setWithObject:], address = <span class="number">0x000000010abd3820</span></div></pre></td></tr></table></figure>
<h4 id="条件断点（Action）"><a href="#条件断点（Action）" class="headerlink" title="条件断点（Action）"></a>条件断点（Action）</h4><p>例子：<br>打印 <code>i</code>，然后大声念出那个句子，接着打印了自定义的表达式，<br>下面是在 <code>LLDB</code> 而不是 <code>Xcode</code> 的 <code>UI</code> 中做这些的时候，看起来的样子：</p>
<figure class="highlight"><table><tr><td class="code"><pre><div class="line">(lldb) breakpoint set -F isEven</div><div class="line">Breakpoint 1: where = DebuggerDance`isEven + 16 at main.m:4, address = 0x00000001083b5d00</div><div class="line">(lldb) breakpoint modify -c 'i == 99' 1</div><div class="line">(lldb) breakpoint command add 1</div><div class="line">Enter your debugger command(s).  Type 'DONE' to end.</div><div class="line">&gt; p i</div><div class="line">&gt; DONE</div><div class="line">(lldb) br li 1</div><div class="line">1: name = 'isEven', locations = 1, resolved = 1, hit count = 0</div><div class="line">    Breakpoint commands:</div><div class="line">      p i</div><div class="line"></div><div class="line">Condition: i == 99</div><div class="line"></div><div class="line">  1.1: where = DebuggerDance`isEven + 16 at main.m:4, address = 0x00000001083b5d00, resolved, hit count = 0</div></pre></td></tr></table></figure>
<h1 id="LLDB项目实用技巧"><a href="#LLDB项目实用技巧" class="headerlink" title="LLDB项目实用技巧"></a>LLDB项目实用技巧</h1><h2 id="运行中更新UI属性"><a href="#运行中更新UI属性" class="headerlink" title="运行中更新UI属性"></a>运行中更新UI属性</h2><ol>
<li><p>打印视图层级：</p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) po [[[<span class="built_in">UIApplication</span> sharedApplication] keyWindow] recursiveDescription]</div><div class="line">&lt;<span class="built_in">UIWindow</span>: <span class="number">0x7f82b1fa8140</span>; frame = (<span class="number">0</span> <span class="number">0</span>; <span class="number">320</span> <span class="number">568</span>); gestureRecognizers = &lt;<span class="built_in">NSArray</span>: <span class="number">0x7f82b1fa92d0</span>&gt;; layer = &lt;<span class="built_in">UIWindowLayer</span>: <span class="number">0x7f82b1fa8400</span>&gt;&gt;</div><div class="line">   | &lt;<span class="built_in">UIView</span>: <span class="number">0x7f82b1d01fd0</span>; frame = (<span class="number">0</span> <span class="number">0</span>; <span class="number">320</span> <span class="number">568</span>); autoresize = W+H; layer = &lt;<span class="built_in">CALayer</span>: <span class="number">0x7f82b1e2e0a0</span>&gt;&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>有了上面的输出，我们可以获取这个 view：</p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) e <span class="keyword">id</span> $myView = (<span class="keyword">id</span>)<span class="number">0x7f82b1d01fd0</span></div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>然后在调试器中改变它的背景色：</p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) e (<span class="keyword">void</span>)[$myView setBackgroundColor:[<span class="built_in">UIColor</span> blueColor]]</div></pre></td></tr></table></figure>
</li>
<li><p>更新到渲染服务中：</p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) e (<span class="keyword">void</span>)[<span class="built_in">CATransaction</span> flush] <span class="comment">// caflush</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Push-一个-View-Controller"><a href="#Push-一个-View-Controller" class="headerlink" title="Push 一个 View Controller"></a>Push 一个 View Controller</h2><ol>
<li><p>获取rootVC：</p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) e <span class="keyword">id</span> $nvc = [[[<span class="built_in">UIApplication</span> sharedApplication] keyWindow] rootViewController]</div></pre></td></tr></table></figure>
</li>
<li><p>然后 push 一个 child view controller：</p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) e <span class="keyword">id</span> $vc = [<span class="built_in">UIViewController</span> new]</div><div class="line">(lldb) e (<span class="keyword">void</span>)[[$vc view] setBackgroundColor:[<span class="built_in">UIColor</span> yellowColor]]</div><div class="line">(lldb) e (<span class="keyword">void</span>)[$vc setTitle:<span class="string">@"Yay!"</span>]</div><div class="line">(lldb) e (<span class="keyword">void</span>)[$nvc pushViewContoller:$vc animated:<span class="literal">YES</span>]</div></pre></td></tr></table></figure>
</li>
<li><p>最后最新下面命令：</p>
</li>
</ol>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) caflush <span class="comment">// e (void)[CATransaction flush]</span></div></pre></td></tr></table></figure>
<h2 id="查看按钮的-target"><a href="#查看按钮的-target" class="headerlink" title="查看按钮的 target"></a>查看按钮的 target</h2><figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">(lldb) po [$myButton allTargets]</div><div class="line">&#123;(</div><div class="line">    &lt;MagicEventListener: <span class="number">0x7fb58bd2e240</span>&gt;</div><div class="line">)&#125;</div><div class="line">(lldb) po [$myButton actionsForTarget:(<span class="keyword">id</span>)<span class="number">0x7fb58bd2e240</span> forControlEvent:<span class="number">0</span>]</div><div class="line">&lt;__NSArrayM <span class="number">0x7fb58bd2aa40</span>&gt;(</div><div class="line">_handleTap:</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>整理自：<a href="https://objccn.io/issue-19-2/" target="_blank" rel="external">https://objccn.io/issue-19-2/</a></p>
<p>扩展阅读：（Chisel-LLDB命令插件，让调试更Easy）<br><a href="https://blog.cnbluebox.com/blog/2015/03/05/chisel/" target="_blank" rel="external">https://blog.cnbluebox.com/blog/2015/03/05/chisel/</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/28/Close_navigation_bar_transparency_caused_by_the_problem/" itemprop="url">
                  关闭导航栏透明引发的问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-28T19:26:56+08:00" content="2016-10-28">
              2016-10-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>刚接手一个新项目，根据设计图来看，导航栏需要修改颜色，于是代码如下：</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 设置导航栏背景颜色</span></div><div class="line"><span class="keyword">self</span>.navigationController.navigationBar.barTintColor = HexRGB(<span class="number">0X000000</span>);</div><div class="line"><span class="comment">// 关闭导航栏透明</span></div><div class="line"><span class="keyword">self</span>.navigationController.navigationBar.translucent = <span class="literal">NO</span>;</div></pre></td></tr></table></figure>
<p>修改之后，界面显示出了问题，视图往下偏移了64，一个导航栏的高度<br><img src="http://img.labmain.com/2016-10-28-095838.jpg" alt=""></p>
<h2 id="排查"><a href="#排查" class="headerlink" title="排查"></a>排查</h2><p>查了一下原因，原来只要关闭导航栏<code>透明</code>，视图就会从导航栏的下方开始绘制。</p>
<p>如果直接修改子视图的frame虽然可以解决问题，但是在Storyborad显示却十分不爽：<br><img src="http://img.labmain.com/2016-10-28-100306.jpg" alt=""></p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>当然知道原因之后，就开始找解决方法，想办法把视图加载位置从（0，0）开始就可以了：</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="keyword">self</span>.navigationController.navigationBar.translucent = <span class="literal">NO</span>;</div></pre></td></tr></table></figure>
<p>完成效果：<br><img src="http://img.labmain.com/2016-10-28-112228.jpg" alt=""></p>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>当然如果想要从导航栏下面加载，有以下三种方法：</p>
<ol>
<li><p>直接把<code>translucent</code>属性盖为<code>YES</code></p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="keyword">self</span>.navigationController.navigationBar.translucent = <span class="literal">YES</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>修改<code>edgesForExtendedLayout</code>成UIRectEdgeNone或者UIRectEdgeLeft | UIRectEdgeBottom | UIRectEdgeRight</p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="keyword">self</span>.edgesForExtendedLayout = <span class="built_in">UIRectEdgeNone</span>;</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>修改<code>frame</code></p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, SCREENW, <span class="keyword">self</span>.view.frame.size.height - <span class="number">64</span>)</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>跟设计师沟通，根本不用修改颜色，给的颜色已经考虑到了透明度问题。。。。。</p>
<hr>
<p>参考资料：<a href="http://blog.csdn.net/zyzxrj/article/details/47832337" target="_blank" rel="external">http://blog.csdn.net/zyzxrj/article/details/47832337</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/14/About_iOS_Block_Circle/" itemprop="url">
                  关于Block循环引用的几种情况和解决方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-14T16:45:30+08:00" content="2016-08-14">
              2016-08-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="循环引用的原因"><a href="#循环引用的原因" class="headerlink" title="循环引用的原因"></a>循环引用的原因</h3><p>循环引用问题的根源在于Block和obj可能会互相强引用，互相retain对方，这样就导致了retain cycle，最后这个Block和obj就变成了孤岛，谁也释放不了谁。比如以下几个例子：</p>
<h3 id="几个示例-及-解决方法"><a href="#几个示例-及-解决方法" class="headerlink" title="几个示例 及 解决方法"></a>几个示例 及 解决方法</h3><figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Class</span>:()</span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSString</span> *strVar;<span class="comment">//成员变量</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Class</span></span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *strVVV;<span class="comment">//成员属性</span></div><div class="line"></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    <span class="comment">// 强引用示例1</span></div><div class="line">    <span class="keyword">self</span>.myBlock = ^&#123;</div><div class="line">        [<span class="keyword">self</span> doSomething];</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// 强引用示例2</span></div><div class="line">    <span class="keyword">self</span>.myBlock = ^&#123;</div><div class="line">        strVar = <span class="string">@"haha"</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// 强引用示例3</span></div><div class="line">    <span class="keyword">self</span>.myBlock = ^&#123;</div><div class="line">        _strVVV = <span class="string">@"vvvvv"</span>;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div><div class="line">       +-----------+           +-----------+</div><div class="line">       |    <span class="keyword">self</span>   |           |   Block   |</div><div class="line">  ---&gt; |           | --------&gt; |           |</div><div class="line">       | <span class="keyword">retain</span> <span class="number">2</span>  | &lt;-------- | <span class="keyword">retain</span> <span class="number">1</span>  |</div><div class="line">       |           |           |           |</div><div class="line">       +-----------+           +-----------+</div></pre></td></tr></table></figure>
<h4 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h4><ul>
<li>示例1:自己强引用自己</li>
<li>示例2: <code>strVar</code> 是成员变量，属性本身为 <code>strong</code>，同样为强引用。</li>
<li>示例3:这里在 Block 中虽然没直接使用 <code>self</code>，但使用了成员属性。在<code>Block</code>中使用成员属性，<code>retain</code>的不是这个属性，而会<code>retain self</code>，但是这个属性为 <code>strong</code>。</li>
</ul>
<h4 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h4><figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"> __<span class="keyword">weak</span> <span class="keyword">typeof</span> (<span class="keyword">self</span>) weakSelf = <span class="keyword">self</span>;</div><div class="line"> </div><div class="line"><span class="comment">// 示例1</span></div><div class="line"><span class="keyword">self</span>.myBlock = ^&#123;</div><div class="line">   [weakSelf doSomething];</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 示例2 </span></div><div class="line"><span class="comment">// 成员变量的话，经过测试，不能使用 weakSelf 指向，也不能使用 self-&gt; ，所以，最好还是改为成员属性</span></div><div class="line"></div><div class="line"><span class="comment">// 示例3</span></div><div class="line"><span class="keyword">self</span>.myBlock = ^&#123;</div><div class="line">   weakSelf.strVVV = <span class="string">@"vvvvv"</span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">      +-----------+           +-----------+</div><div class="line">      | <span class="keyword">self</span>      |           |   Block   |</div><div class="line"> --X-&gt;|           | ----X---&gt; |           |</div><div class="line">      | <span class="keyword">retain</span> <span class="number">0</span>  | &lt; - - - - | <span class="keyword">retain</span> <span class="number">0</span>  |</div><div class="line">      |           |   <span class="keyword">weak</span>    |           |</div><div class="line">      +-----------+           +-----------+</div></pre></td></tr></table></figure>
<h4 id="另外一个示例："><a href="#另外一个示例：" class="headerlink" title="另外一个示例："></a>另外一个示例：</h4><figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 以下代码会存在强引用</span></div><div class="line">BlockTestVC *myController = [[BlockTestVC alloc] init];</div><div class="line">myController.testBlock =  ^(<span class="built_in">NSString</span> *str) &#123;</div><div class="line">    [myController dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 解决上述强引用的方法,同样也是添加 __weak</span></div><div class="line">BlockTestVC *myController1 = [[BlockTestVC alloc] init];</div><div class="line">BlockTestVC * __<span class="keyword">weak</span> weakMyViewController1 = myController1;</div><div class="line">myController1.testBlock =  ^(<span class="built_in">NSString</span> *str) &#123;</div><div class="line">    [weakMyViewController1 dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 更好的方式是在使用__weak变量前，先用__strong变量把该值锁定</span></div><div class="line">BlockTestVC *myController2 = [[BlockTestVC alloc] init];</div><div class="line">BlockTestVC * __<span class="keyword">weak</span> weakMyController2 = myController2;</div><div class="line">myController2.testBlock =  ^(<span class="built_in">NSString</span> *str) &#123;</div><div class="line">    BlockTestVC *strongMyController = weakMyController2;</div><div class="line">    <span class="keyword">if</span> (strongMyController) &#123;</div><div class="line">        [strongMyController dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</div><div class="line">        </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="多个对象之间引用问题"><a href="#多个对象之间引用问题" class="headerlink" title="多个对象之间引用问题"></a>多个对象之间引用问题</h4><p>retain cycle不只发生在两个对象之间，也可能发生在多个对象之间，这样问题更复杂，更难发现</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">ClassA* objA = [[ClassA alloc] init];</div><div class="line">objA.myBlock = ^&#123;</div><div class="line">[<span class="keyword">self</span> doSomething];</div><div class="line">&#125;;</div><div class="line"><span class="keyword">self</span>.objA = objA;</div><div class="line"></div><div class="line">  +-----------+           +-----------+           +-----------+</div><div class="line">  |   <span class="keyword">self</span>    |           |   objA    |           |   Block   |</div><div class="line">  |           | --------&gt; |           | --------&gt; |           |</div><div class="line">  | <span class="keyword">retain</span> <span class="number">1</span>  |           | <span class="keyword">retain</span> <span class="number">1</span>  |           | <span class="keyword">retain</span> <span class="number">1</span>  |</div><div class="line">  |           |           |           |           |           |</div><div class="line">  +-----------+           +-----------+           +-----------+</div><div class="line">       ^                                                |</div><div class="line">       |                                                |</div><div class="line">       +------------------------------------------------+</div></pre></td></tr></table></figure>
<p>解决办法同样是用__weak打破循环引用</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">ClassA* objA = [[ClassA alloc] init];</div><div class="line"></div><div class="line">__<span class="keyword">weak</span> <span class="keyword">typeof</span>(<span class="keyword">self</span>)weakSelf = <span class="keyword">self</span>;</div><div class="line">objA.myBlock = ^&#123;</div><div class="line">  [weakSelf doSomething];</div><div class="line">&#125;;</div><div class="line"><span class="keyword">self</span>.objA = objA;</div></pre></td></tr></table></figure>
<h3 id="最后再说一下不会被循环引用的几种情况："><a href="#最后再说一下不会被循环引用的几种情况：" class="headerlink" title="最后再说一下不会被循环引用的几种情况："></a>最后再说一下不会被循环引用的几种情况：</h3><ul>
<li>UIView 的 animations</li>
<li>GCD</li>
<li>NSOperation</li>
<li>第三方框架：AFN、Masonry、等。。</li>
<li><p>block不是self的属性或者变量时，在block内使用self也不会循环引用：</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="comment">//block不是self的属性时，block内部使用self也不是循环引用</span></div><div class="line">Animal *animal = [[Animal alloc] init];</div><div class="line">animal.animalBlock = ^(<span class="keyword">void</span>)&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"animal--&gt; value:%@,address=%p,self=%p"</span>,<span class="keyword">self</span>.person,<span class="keyword">self</span>.person,<span class="keyword">self</span>);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>把block内部抽出一个作为self的方法，当使用weakSelf调用这个方法，并且这个方法里有self的属性，block不会造成内存泄露</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="keyword">self</span>.testBlock = ^()</div><div class="line">&#123;</div><div class="line">   [weakSelf test];</div><div class="line">&#125;;</div><div class="line">-(<span class="keyword">void</span>)test</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,<span class="keyword">self</span>.mapView);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>当使用类方法有block作为参数使用时，block内部使用self也不会造成内存泄露</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><div class="line">[WDNetwork testBlock:^(<span class="keyword">id</span> responsObject) &#123;</div><div class="line">      <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,<span class="keyword">self</span>.mapView);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>关于UIView和AFN不会强引用的原因：</p>
<p>首先block循环引用的条件: <code>block</code> —&gt;强引用(<code>self</code>)   self —&gt;强引用(<code>block</code>属性)</p>
<p>UIView的动画block不会造成循环引用的原因就是，这是个类方法，当前控制器不可能强引用一个类，所以循环无法形成。</p>
<p>而AFN无循环是因为绝大部分情况下，你的网络类对象是不会被当前控制器引用的，这时就不会形成引用环。当然我不知道AFN是否做了别的处理，按照这样来说的话，如果你的控制器强引用了这个网络类的对象，而且在block里面引用了当前控制器，也是会发生循环引用的。<br>其他情况可以自己查询一下</p>
</blockquote>
<p>参考内容：<a href="http://tanqisen.github.io/blog/2013/04/19/gcd-block-cycle-retain/" target="_blank" rel="external">http://tanqisen.github.io/blog/2013/04/19/gcd-block-cycle-retain/</a></p>
<p>推荐阅读：理解 ARC 下的循环引用 <a href="http://ios.jobbole.com/82077/" target="_blank" rel="external">http://ios.jobbole.com/82077/</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/26/Xcode_Shortcut_Key/" itemprop="url">
                  Xcode 的一些快捷键
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-26T11:35:26+08:00" content="2016-07-26">
              2016-07-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://img.labmain.com/2016-11-07-072038.jpg" alt=""></p>
<h1 id="Mac-相关"><a href="#Mac-相关" class="headerlink" title="Mac 相关"></a>Mac 相关</h1><p>程序切换         <code>cmd + ~</code><br>程序内切换       <code>cmd + tap</code>  </p>
<p>偏好设置         <code>cmd + ,</code>  </p>
<p>隐藏Xcode       <code>cmd + h</code><br>隐藏其他窗口      <code>cmd + option + H</code>  </p>
<p>关闭窗口          <code>cmd + W</code><br>关闭当前项目       <code>cmd + option + W</code><br>关闭当前文件       <code>cmd + control + W</code><br>关闭Xcode        <code>cmd + Q</code>  </p>
<p>保存文件           <code>cmd + S</code><br>保存所有文件       <code>cmd + option + S</code><br>另存为            <code>cmd + shift + S</code><br>副本另存为         <code>cmd + option + shift + S</code><br>还原到保存时状态    <code>cmd + U</code>  </p>
<p>创建快照           <code>cmd + control + S</code><br>显示快找            <code>可设置快捷键(File -&gt; Snapshots)</code>  </p>
<h1 id="文件相关"><a href="#文件相关" class="headerlink" title="文件相关"></a>文件相关</h1><p>新建项目    <code>cmd + shift + N</code><br>新建文件    <code>cmd + N</code><br>新建空文件   <code>cmd + control + N</code></p>
<h1 id="运行和编译"><a href="#运行和编译" class="headerlink" title="运行和编译"></a>运行和编译</h1><p>运行      <code>cmd + R</code><br>编译      <code>cmd + B</code><br>停止      <code>cmd + .</code><br>单步调试   <code>F6</code><br>跳入      <code>F7</code><br>继续      <code>F8</code>  </p>
<h1 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h1><p>在当前行断点标记和取消    <code>cmd + \ /</code><br>清除工程缓存            <code>cmd + shift + K</code><br>清楚控制台打印信息       <code>cmd + K</code>  </p>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><h3 id="双编辑器"><a href="#双编辑器" class="headerlink" title="双编辑器"></a>双编辑器</h3><p>开启双编辑器               <code>option + cmd + enter</code><br>关闭双编辑器                 <code>cmd + enter</code><br>打开某文件作为次编辑器       <code>option + 点击</code>  </p>
<h3 id="导航栏"><a href="#导航栏" class="headerlink" title="导航栏"></a>导航栏</h3><p>左边的导航窗口开关             <code>cmd + 0</code><br>右边的导航窗口开关           <code>cmd + option + 0</code><br>切换使用工具选项卡           <code>cmd + option 1-n</code>    </p>
<p>底部调试区显示隐藏开关        <code>cmd + option + Y</code>  </p>
<h3 id="查看相关"><a href="#查看相关" class="headerlink" title="查看相关"></a>查看相关</h3><p>.m 与.h文件之间切换         <code>cmd + control + 上/下</code><br>按照浏览文件的前后顺序切换    <code>cmd + control + 左/右</code><br>快速显示文件位置            <code>cmd + shift + J</code></p>
<h3 id="跳转相关"><a href="#跳转相关" class="headerlink" title="跳转相关"></a>跳转相关</h3><p>快速打开匹配的文件          <code>cmd + shift + O</code><br>属性方法跳转菜单            <code>control + 6</code><br>魔法菜单                   <code>control + 1</code><br>跳转到指定行                <code>cmd + L</code><br>跳转到光标出（视图切换）       <code>cmd + J</code></p>
<h1 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h1><p>范围内重命名局部变量（不支持属性）         <code>control + cmd + E</code><br>查看属性或者变量的来源                   <code>control + cmd + J</code><br>隐藏和展开方法体                        <code>cmd + option + →/←</code></p>
<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><p>项目中查找              <code>cmd + shift + F</code><br>查找替换                <code>cmd + control + F</code><br>查找上一个               <code>cmd + G</code><br>查找下一个               <code>cmd + shift + G</code></p>
<h1 id="排版"><a href="#排版" class="headerlink" title="排版"></a>排版</h1><p>注释           <code>cmd + /</code>  </p>
<p>到行首          <code>cmd + 左，control + A</code><br>到行尾          <code>cmd + 右，control + E</code>  </p>
<p>删除一整行      <code>到行尾 + cmd + delete</code>  </p>
<p>代码左缩进      <code>cmd + [</code><br>代码右缩进      <code>cmd + ]</code><br>代码上移一行      <code>cmd + option + [</code><br>代码下移一行    <code>cmd + option + ]</code>  </p>
<p>格式化代码      <code>control + I</code>  </p>
<h1 id="光标操作-Unix操作通用"><a href="#光标操作-Unix操作通用" class="headerlink" title="光标操作(Unix操作通用)"></a>光标操作(Unix操作通用)</h1><p>向右一个字符（forward）         <code>control + F</code><br>向左一个字符（backward）        <code>control + B</code><br>向前一行（previous）           <code>control + P</code><br>向后一行（next）               <code>control + N</code><br>去行首                        <code>control + A</code><br>去行尾（end）                  <code>control + E</code><br>调换光标两边的字符（transpose）  <code>control + T</code><br>删除右侧的字符（delete）        <code>control + D</code><br>删除本行剩余的字符（kill）       <code>control + K</code>  </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/07/The_programmer_must_learn_Science_online/" itemprop="url">
                  程序员必备的翻墙姿势
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-07T12:33:43+08:00" content="2016-07-07">
              2016-07-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/互联网/" itemprop="url" rel="index">
                    <span itemprop="name">互联网</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>此篇文章，主要讲解<code>Shadowdsocks</code>的使用和配置。以及与VPN的对比。<br><code>注意：此文章部分链接需要翻墙才能打开。</code></p>
<h2 id="为什么要翻墙"><a href="#为什么要翻墙" class="headerlink" title="为什么要翻墙"></a>为什么要翻墙</h2><ul>
<li><p>以下是15年某篇文章的标题：全球前30大英文网站中这16个天朝不能正常访问，配图请看：<br><img src="http://img.labmain.com/2016-11-07-072051.jpg" alt=""></p>
</li>
<li><p>你可以尝试打开一下网站：<br>  <a href="https://www.gooogle.com" target="_blank" rel="external">Google</a>、<a href="https://www.facebook.com/" target="_blank" rel="external">FaceBook</a>、<a href="https://www.youtube.com/" target="_blank" rel="external">Youtube</a>、<a href="https://www.wikipedia.org/" target="_blank" rel="external">Wikipedia</a>、<a href="https://twitter.com/" target="_blank" rel="external">Twitter</a>、<a href="https://www.dropbox.com/" target="_blank" rel="external">Dropbox</a></p>
</li>
<li><p>查看一些国外的技术网站：<code>stackoverflow</code>、<code>github</code>（翻墙之后会更流畅！）</p>
</li>
<li><p>程序员需要一个自由的互联网</p>
</li>
</ul>
<h2 id="翻墙的几种手段"><a href="#翻墙的几种手段" class="headerlink" title="翻墙的几种手段"></a>翻墙的几种手段</h2><p>这里介绍不介绍，修改<code>Hosts</code>、<code>蓝灯</code>、<code>GoAgent</code>、<code>Tor</code>等方式，关于这些翻墙方式可以看一下这篇文章：<a href="http://fqf555.blogspot.jp/2014/11/break-through-gfw.html" target="_blank" rel="external">如何选择翻墙方式</a></p>
<h3 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h3><p><code>VPN</code> 其实就是把你整个网关出口跟远端服务器之间建立一个隧道，你的所有的出口数据都会经过VPN服务器进行转发。</p>
<p>优点：</p>
<ul>
<li>全局代理，配置简单。</li>
</ul>
<p>缺点：</p>
<ul>
<li>缺点也很明显，无差别代理，访问国内网站，相当于先跳转到国外，再访问国内网站，速度可想而知。</li>
</ul>
<p>网上可以找到各种免费的<code>VPN</code>代理，也有收费。这里推荐<a href="https://www.getgreenjsq.org" target="_blank" rel="external">GreenVPN</a>，注册之后可以有免费的<code>VPN</code>用，也可以付费。（PS，网上各种假冒网站，注意甄别！）</p>
<p>具体如何使用，这里就不过多介绍了，</p>
<p><strong>总结：<code>VPN</code> 适合需要系统全局翻墙，并且是按需使用的方式。</strong></p>
<h3 id="Shadowdsocks"><a href="#Shadowdsocks" class="headerlink" title="Shadowdsocks"></a>Shadowdsocks</h3><p>有关<code>Shadowdsocks</code>的介绍，可以详细的看一下这篇文章：<a href="http://vc2tea.com/whats-shadowsocks/" target="_blank" rel="external">whats-shadowsocks</a></p>
<p><code>Shadowsocks</code> 的优劣：<br>优势：</p>
<ul>
<li>安全。所有数据流量全部经过加密，加密算法可选并支持自定义算法。另外，远程 <code>DNS</code> 解析也使得本地的 <code>ISP</code> 无法通过 <code>DNS</code> 查询获取你所访问的网站。</li>
<li>速度相对较快。由于其隐蔽性，只会有很少的数据包会被 <code>GFW</code> 丢弃，从而保证了连接速度。</li>
<li>客户端配置简单。配置时只需要填写 <code>IP /域名</code>、<code>端口号</code>，<code>密码</code>，然后选择加密方式即可。</li>
<li>智能切换。 传统的 <code>VPN</code> 方式，在切换网络时非常不方便， 比如连上国外的 VPN 之后会发现访问国内的网站速度严重下降。 <code>ShadowSocks</code> 支持 <code>PAC</code> 列表，根据 <code>PAC</code> 中的规则，有针对性地选用恰当的网络访问方式，兼顾了访问速度与访问效率。移动客户端还支持针对不同应用设置单独代理。</li>
<li>代码开源。不像某些蜜罐式的翻墙工具，开源的代码保证了无后门，从而为上网的隐私性与安全性提供保障。</li>
<li>跨平台。支持主流系统包括 <code>Windows</code>， <code>Linux</code>， <code>Mac</code>， <code>Android</code>, <code>IOS</code>，都有对应的客户端支持。</li>
</ul>
<p>关于它优势的一面可以看一下这篇文章：<a href="https://plus.google.com/+GhostAssassin/posts/TtWFAQmSMVE" target="_blank" rel="external">翻墙软件的选择和安全系数</a></p>
<p>劣势</p>
<ul>
<li>技术成本。若自己搭建 <code>ShadowSocks</code> 服务，需要一定的技术成本。因为大部分服务端是基于运行 <code>Linux</code> 的 <code>VPS</code>（虚拟主机）搭建，因此需要学会使用 <code>putty</code> 等远程管理工具的使用方法，并掌握一定的<code>Linux</code>基本命令行操作。</li>
<li>金钱成本。租用国外的服务器，需要价格不菲的费用。 若使用免费 <code>ShadowSocks</code> 账号，可能有一定的安全成本。有一些人会将自己的 <code>ShadowSocks</code> 节点免费分享出来，这些人是非常值得肯定和称赞的！但是其中有一小部分人别有居心，例如在 <code>ShadowSocks</code> 的服务器端监听网络流量，进行中间人攻击等，这类钓鱼服务器会严重损害用户的个人信息安全。 若购买收费的 <code>ShadowSocks</code> 账号， 需要一定的金钱成本 由于很多 <code>ShadowSocks</code> 卖家都是以盈利为目的，需要花费一定的费用。 那么，自己想要有一个影梭账号的话，到底是选用哪种比较好呢？可以看到网上很多卖 <code>ShadowSocks</code> 账号的，有的价格很便宜，比自己搭服务器划算多了，是不是直接购买一个账号比较好呢？ 在这里我建议大家自己搭服务器</li>
</ul>
<p><strong>上面介绍的优势，就是我推荐大家使用的理由，而劣势就是写文章的缘由。</strong></p>
<h3 id="关于VPN"><a href="#关于VPN" class="headerlink" title="关于VPN"></a>关于VPN</h3><p>虽然<code>Shadowdsocks</code>很好用，但是有的时候，总会碰到一个先有鸡还是有蛋的情况，你要配置<code>Shadowdsocks</code>，但是需要先翻墙，所以为了避免这种情况，最好还有备一个VPN还是有必要的。</p>
<h2 id="使用和配置Shadowdsocks客户端"><a href="#使用和配置Shadowdsocks客户端" class="headerlink" title="使用和配置Shadowdsocks客户端"></a>使用和配置Shadowdsocks客户端</h2><h3 id="客户端下载"><a href="#客户端下载" class="headerlink" title="客户端下载"></a>客户端下载</h3><ul>
<li><a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="external">Windows(GitHub)</a></li>
<li><a href="https://github.com/shadowsocks/shadowsocks-iOS/releases" target="_blank" rel="external">Mac(GitHub)</a></li>
<li>由于<code>iOS</code>系统安全性，需要越狱才能安装<code>Shadowdsocks</code>，如果你已经越狱，你可以自行编译安装，<a href="https://github.com/shadowsocks/shadowsocks-iOS/archive/2.6.3.zip" target="_blank" rel="external">源码</a></li>
<li><p><code>iOS</code>不越狱客户端推荐（以下软件使用了<code>iOS9</code>系统的新特性，也就是话说仅支持<code>iOS9+</code>）</p>
<ul>
<li><a href="https://itunes.apple.com/cn/app/surge-web-developer-tool-proxy/id1040100637?mt=8" target="_blank" rel="external">Surge</a>:强烈推荐，虽然价格偏高，但是使用体验最好</li>
<li><a href="https://itunes.apple.com/cn/app/shadowrocket/id932747118?mt=8" target="_blank" rel="external">Shadowrocket</a>：价格便宜，买不起上面的，就买这个吧</li>
<li><a href="https://itunes.apple.com/app/apple-store/id1070901416?mt=8" target="_blank" rel="external">potatso</a>:价格比上面贵一些，但是代码<a href="https://github.com/shadowsocks/Potatso" target="_blank" rel="external">开源</a>,有能力的可以自己编译安装。</li>
</ul>
</li>
<li><p><a href="https://play.google.com/store/apps/details?id=com.github.shadowsocks" target="_blank" rel="external">Android(Google Play)</a></p>
</li>
</ul>
<h3 id="客户端使用"><a href="#客户端使用" class="headerlink" title="客户端使用"></a>客户端使用</h3><p>这里只介绍<code>MAC</code>系统使用，如果已经有了<code>Shadowsocks</code>帐号：<br><img src="http://img.labmain.com/2016-11-07-071157.jpg" alt=""></p>
<ol>
<li>服务器设定 -&gt; <code>IP</code>、<code>端口</code>、<code>加密</code>、<code>密码</code>，一一对应填写。</li>
<li>测试服务器是否配置成功：<ul>
<li>勾选配置好的服务器，选择<code>全局模式</code>，然后打开<a href="https://www.google.com" target="_blank" rel="external">Google</a>,如果可以就进行下一步。</li>
<li>如果打不开，检查填写有误，检查是否使用了默认的<code>443</code>端口，是否开启了其它代理。</li>
</ul>
</li>
<li><p>更新 PAC  </p>
<ul>
<li>关于 <code>PAC</code> 介绍可以看一下这篇文章： <a href="https://shadowsocks.info/shadowsocks-pac/" target="_blank" rel="external">SS软件中的pac自动代理模式是什么？</a></li>
<li><p>Mac版的ss客户端已经停滞更新，官方版本一直停滞在<code>2.6.3</code>。所以，<code>gfwlist</code>地址的改变，直接导致了<code>PAC</code>无法更新了。解决方法有两种，你任选一种吧。</p>
</li>
<li><p>方法A：<br>  直接改用民间大神修改的<code>2.6.5</code>版本即可，<a href="https://github.com/RobertYan/ShadowsocksX/releases" target="_blank" rel="external">https://github.com/RobertYan/ShadowsocksX/releases</a>，<code>Releases</code>版本：<a href="http://www.johntitorblog.com/wp-content/uploads/2016/07/ShadowsocksX-2.6.5.zip" target="_blank" rel="external">ShadowsocksX-2.6.5</a></p>
</li>
<li><p>方法B：<br>  如果不信任其他人修改的版本，你可以使用这个脚本更新<code>PAC</code>，<a href="https://gist.github.com/VincentSit/b5b112d273513f153caf23a9da112b3a" target="_blank" rel="external">https://gist.github.com/VincentSit/b5b112d273513f153caf23a9da112b3a</a></p>
</li>
</ul>
</li>
<li><p>测试 PAC 是否生效，<code>选择自动模式代理</code>，再次打开<a href="https://www.google.com" target="_blank" rel="external">Google</a>，如果可以打开，说明配置成功。</p>
</li>
</ol>
<hr>
<h2 id="配置Shadowdsocks服务器"><a href="#配置Shadowdsocks服务器" class="headerlink" title="配置Shadowdsocks服务器"></a>配置Shadowdsocks服务器</h2><p>这里只介绍，购买<code>VPS</code>服务器，来搭建<code>Shadowdsocks</code>服务端。不讨论购买现成的帐号。</p>
<h3 id="服务器选择一：搬瓦工bandwagonhost"><a href="#服务器选择一：搬瓦工bandwagonhost" class="headerlink" title="服务器选择一：搬瓦工bandwagonhost"></a>服务器选择一：搬瓦工<a href="https://bandwagonhost.com/" target="_blank" rel="external">bandwagonhost</a></h3><p>关键字：<code>价格低</code>、<code>一键配置</code>、<code>支付宝</code></p>
<p>价格：<code>$2.99/月</code>，也会有$3.99一年的特价机器。</p>
<p>篇幅有限，具体配置见：<a href="http://blog.lhuac.com/2/" target="_blank" rel="external">搬瓦工搭建Shadowsocks服务器详细图文教程</a></p>
<p>服务器购买注意：买价格最便宜的就可以了，优先：<code>洛杉矶</code>和<code>佛罗里达</code>（也可以随时切换）。</p>
<h3 id="服务器选择二：Vultr"><a href="#服务器选择二：Vultr" class="headerlink" title="服务器选择二：Vultr"></a>服务器选择二：<a href="http://www.vultr.com/?ref=6936225-3B" target="_blank" rel="external">Vultr</a></h3><p>关键字：<code>本人使用</code>、<code>配置高，可做服务器</code>、<code>速度快</code></p>
<p>价格：<code>$5/月</code></p>
<p>服务器购买注意：必须选择日本<code>VPS</code>！！</p>
<p>篇幅有限，具体配置可以参考：<a href="http://www.jianshu.com/p/ad42f98d81ee" target="_blank" rel="external">Vultr 搭建安装 Shadowsocks</a></p>
<p>注意：由于<code>Vultr</code>没有一键配置选项，所以需要手动配置，但是网上已经有人给出一键安装的脚本：<a href="https://teddysun.com/342.html" target="_blank" rel="external">Shadowsocks Python版一键安装脚本</a></p>
<p>小广告一下：如果选择了<code>Vultr</code>可以使用我这个链接，大家都会得到<code>$20</code>美元：<a href="http://www.vultr.com/?ref=6936225-3B" target="_blank" rel="external">http://www.vultr.com/?ref=6936225-3B</a></p>
<h3 id="总结与注意："><a href="#总结与注意：" class="headerlink" title="总结与注意："></a>总结与注意：</h3><p>要想简单便宜，可以选择<code>搬瓦工</code>，但我自己贴身体会来讲，虽然刷网页虽然够了，但是看视频下载文件，还是有些慢，这个时候你可以选择<code>Vultr</code></p>
<h2 id="Shadowdsocks配合其它软件使用"><a href="#Shadowdsocks配合其它软件使用" class="headerlink" title="Shadowdsocks配合其它软件使用"></a>Shadowdsocks配合其它软件使用</h2><p><code>shadowsocks</code>代理属于<code>socks5</code>代理，通俗的理解，<code>socks5</code>只是局部代理，不能像<code>vpn</code>那样把整个电脑都代理。因此，一般情况下只有支持<code>socks5</code>的软件才能使用<code>shadowsocks</code>代理。当然我们也可以借助其它软件来实现，具体见下面介绍：</p>
<h3 id="Dropbox配置代理"><a href="#Dropbox配置代理" class="headerlink" title="Dropbox配置代理"></a>Dropbox配置代理</h3><p>设置-&gt;网络-&gt;手动-&gt;:<br><img src="http://img.labmain.com/2016-11-07-071532.jpg" alt=""><br>配置见图，即可走本地<code>Shadowdsocks</code>代理</p>
<blockquote>
<p>存在的问题：Dropbox 安装之后，第一次启动是不走代理的，需要全局代理也不行。不清楚是什么原因，我是使用VPN第一次启动的。</p>
</blockquote>
<h3 id="使用proxifier代理指定程序"><a href="#使用proxifier代理指定程序" class="headerlink" title="使用proxifier代理指定程序"></a>使用proxifier代理指定程序</h3><p>具体参见：<a href="http://chaishiwei.com/blog/830.html" target="_blank" rel="external">Proxifier：给某个单独应用配置代理上网服务</a></p>
<h3 id="终端走代理的方法"><a href="#终端走代理的方法" class="headerlink" title="终端走代理的方法"></a>终端走代理的方法</h3><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="comment"># 在终端下使用 </span></div><div class="line"><span class="built_in">export</span> ALL_PROXY=socks5://127.0.0.1:1080</div><div class="line"><span class="comment"># 清除代理 </span></div><div class="line"><span class="built_in">unset</span> ALL_PROXY</div></pre></td></tr></table></figure>
<p>为了测试是否成功可以<code>curl -i http://ip.cn</code> 查看ip</p>
<p>以上命令只对本窗口生效，为了方便呢，可以在<code>~/.bash_profile</code>中加上这个。（如果没有<code>bash_profile</code>文件自行创建）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">setproxy</span></span>() &#123;</div><div class="line">    <span class="comment"># export &#123;HTTP,HTTPS,FTP&#125;_PROXY="http://127.0.0.1:3128" 也可以设置http代理</span></div><div class="line">    <span class="built_in">export</span> ALL_PROXY=socks5://127.0.0.1:1080</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">unsetproxy</span></span>() &#123;</div><div class="line">    <span class="comment"># unset &#123;HTTP,HTTPS,FTP&#125;_PROXY</span></div><div class="line">    <span class="built_in">unset</span> ALL_PROXY</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>需要使用代理的时候<code>setproxy</code>，不用了就<code>unsetproxy</code><br>就可以很方便的在<code>shell</code>环境下切换设置代理了。</p>
<h3 id="ProxyChains-NG终端下代理"><a href="#ProxyChains-NG终端下代理" class="headerlink" title="ProxyChains-NG终端下代理"></a>ProxyChains-NG终端下代理</h3><p>具体参加：<a href="http://janrone.com/2016/03/26/Mac%E4%B8%8B%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE-ProxyChains-NG-%E5%AE%9E%E7%8E%B0%E7%BB%88%E7%AB%AF%E4%B8%8B%E4%BB%A3%E7%90%86/" target="_blank" rel="external">Mac下安装及配置 ProxyChains-NG 实现终端下代理</a></p>
<p>如果安装成功之后，不能使用代理的话，需要关闭 <code>SIP</code>，具体见： <a href="http://blog.csdn.net/nicekwell/article/details/49206435" target="_blank" rel="external">解决os x el capitan proxychains 不能用 （关闭SIP）</a></p>
<h3 id="路由器上使用Shadowdsocks代理局域网"><a href="#路由器上使用Shadowdsocks代理局域网" class="headerlink" title="路由器上使用Shadowdsocks代理局域网"></a>路由器上使用Shadowdsocks代理局域网</h3><p>每个路由器都不太一样，自行谷歌吧。</p>
<h2 id="Shadowdsocks-进阶"><a href="#Shadowdsocks-进阶" class="headerlink" title="Shadowdsocks 进阶"></a>Shadowdsocks 进阶</h2><h3 id="Shadowdsocks加速的几种方案"><a href="#Shadowdsocks加速的几种方案" class="headerlink" title="Shadowdsocks加速的几种方案"></a>Shadowdsocks加速的几种方案</h3><p>方案一：国内服务器安装<code>Haproxy</code>代理<code>Shadowsocks</code>实现加速<br>方案三：使用锐速加速<br>方案四：<code>FilnalSpeed</code>加速方案<br>具体使用，自行谷歌。</p>
<h3 id="Shadowdsocks多用户配置"><a href="#Shadowdsocks多用户配置" class="headerlink" title="Shadowdsocks多用户配置"></a>Shadowdsocks多用户配置</h3><p><a href="https://www.bawagong.com/%E6%90%AC%E7%93%A6%E5%B7%A5vps-shadowsocks%E5%A4%9A%E7%94%A8%E6%88%B7%E7%AB%AF%E5%8F%A3%E9%85%8D%E7%BD%AE/" target="_blank" rel="external">搬瓦工VPS shadowsocks多用户端口配置</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/05/xcode_7_not_highlighting_code/" itemprop="url">
                  Xcode7.3 代码不显示高亮问题解决方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-05T17:22:56+08:00" content="2016-05-05">
              2016-05-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近项目碰到 Xcode 代码无法显示的问题,具体如下:</p>
<p><img src="http://img.labmain.com/2016-11-07-072019.jpg" alt=""></p>
<p>类名和方法名都无法显示, 并且无法跳转</p>
<p>在百度的搜索下大多找到的是以下方法:</p>
<pre><code>1. clean 一下
2. 清除所有工程 Organizer-projects - 把项目Remove from Organizer
3. 关闭xcode重新打开即可。
4. 实在不行就重启吧。
</code></pre><p>但是都没有解决问题, 于是通过谷歌找到以下解决方案:</p>
<ol>
<li>删除模块缓存<br> 首先关闭 Xcode ,然后删除 <code>~/Library/Developer/Xcode/DerivedData/ModuleCache</code> 目录下的所有文件</li>
<li>修改 <code>Enable Modules</code> 的值<br> 到你的项目的 <code>Build Settings</code> 中,找到 <code>Enable Modules</code><br> 如果值是 <code>YES</code> ,修改为 <code>NO</code>,然后 编译以下,会报错,之后再修改为 <code>YES</code></li>
</ol>
<p>经过上面两个操作之后,你还需要 <code>Clean</code>(Shift + Command + K)一下</p>
<p>最终解决了我的问题!!<br><img src="http://img.labmain.com/2016-11-07-072026.jpg" alt=""></p>
<p>附上stackoverflow原帖: <a href="http://stackoverflow.com/questions/36165865/xcode-7-3-syntax-highlighting-and-code-completion-issues-with-swift" target="_blank" rel="external">http://stackoverflow.com/questions/36165865/xcode-7-3-syntax-highlighting-and-code-completion-issues-with-swift</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/06/A_Alfred_Workflow_upload_clipboard'image_to_qiniu/" itemprop="url">
                  Alfred Workflow —— 上传剪贴板的图片到七牛
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-06T20:29:19+08:00" content="2016-04-06">
              2016-04-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>虽然MWeb可以方便上传本地图片到图床，但是操作还是比较麻烦，如果能够截图之后就直接上传图床，并且返回Markdown格式的链接，岂不是更方便。</p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ol>
<li>获取剪贴板内容，判断是否是图片</li>
<li>如果是图片，保存到本地缓存，拿到路径</li>
<li>使用七牛SDK上传图片，返回图片地址</li>
</ol>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> datetime</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> atexit</div><div class="line"><span class="keyword">import</span> imghdr</div><div class="line"><span class="keyword">from</span> subprocess <span class="keyword">import</span> call</div><div class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> expanduser, exists, basename, getsize</div><div class="line"></div><div class="line"><span class="keyword">from</span> qiniu <span class="keyword">import</span> Auth, put_file, etag</div><div class="line"></div><div class="line"><span class="comment"># 获取剪贴板里的图片,并且保存到 本地 tmp 文件夹</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">capture</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        call([<span class="string">'/usr/local/bin/pngpaste'</span>, <span class="string">'-v'</span>], stderr=open(<span class="string">'/dev/null'</span>, <span class="string">'w'</span>))</div><div class="line">    <span class="keyword">except</span> OSError:</div><div class="line">        print(<span class="string">'please preinstall pngpaste use `brew install pngpaste` before use this script'</span>)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    file_name = datetime.datetime.now().strftime(<span class="string">'%Y_%m_%d_%H_%M_%S.png'</span>)</div><div class="line">    file_path = os.path.join(<span class="string">'/tmp'</span>, file_name)</div><div class="line">    atexit.register(<span class="keyword">lambda</span> x: os.remove(x) <span class="keyword">if</span> os.path.exists(x) <span class="keyword">else</span> <span class="keyword">None</span>, file_path)</div><div class="line">    save = call([<span class="string">'/usr/local/bin/pngpaste'</span>, file_path])</div><div class="line">    <span class="keyword">if</span> save == <span class="number">1</span>:</div><div class="line">        sys.exit()</div><div class="line">    <span class="keyword">return</span> file_path, file_name</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> sys.argv.__len__() == <span class="number">1</span>:</div><div class="line">    file_path, file_name = capture()</div><div class="line"></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="comment"># 任意字符代表捕获粘贴板</span></div><div class="line">    file_path = expanduser(sys.argv[<span class="number">-1</span>])</div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> exists(file_path):</div><div class="line">        file_path, file_name = capture()</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">if</span> imghdr.what(file_path) <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">'jpeg'</span>, <span class="string">'jpg'</span>, <span class="string">'png'</span>]:</div><div class="line">            sys.exit(<span class="string">'file type error'</span>)</div><div class="line">        file_name = basename(file_path)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#需要填写你的 Access Key 和 Secret Key</span></div><div class="line">access_key = <span class="string">''</span></div><div class="line">secret_key = <span class="string">''</span></div><div class="line"></div><div class="line"><span class="comment">#域名前缀</span></div><div class="line">qiniu_URL = <span class="string">''</span></div><div class="line"></div><div class="line"><span class="comment">#构建鉴权对象</span></div><div class="line">q = Auth(access_key, secret_key)</div><div class="line"></div><div class="line"><span class="comment">#要上传的空间</span></div><div class="line">bucket_name = <span class="string">''</span></div><div class="line"></div><div class="line"><span class="comment">#上传到七牛后保存的文件名</span></div><div class="line">key = file_name</div><div class="line"></div><div class="line"><span class="comment">#生成上传 Token，可以指定过期时间等</span></div><div class="line">token = q.upload_token(bucket_name, key, <span class="number">3600</span>)</div><div class="line"></div><div class="line"><span class="comment">#要上传文件的本地路径</span></div><div class="line">localfile = file_path</div><div class="line"></div><div class="line"><span class="comment">#上传文件到七牛</span></div><div class="line">info = put_file(token, key, localfile)</div><div class="line"></div><div class="line"><span class="keyword">if</span> info:</div><div class="line">    <span class="keyword">print</span> qiniu_URL + file_name</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'上传失败!'</span></div></pre></td></tr></table></figure>
<h3 id="代码说明"><a href="#代码说明" class="headerlink" title="代码说明"></a>代码说明</h3><p>需要安装 pngpaste，可以使用 homebrew 安装： <code>brew install pngpaste</code></p>
<h3 id="代码存在的问题"><a href="#代码存在的问题" class="headerlink" title="代码存在的问题"></a>代码存在的问题</h3><p>仅能识别截图，不能上传file。</p>
<h3 id="添加到-Alfred"><a href="#添加到-Alfred" class="headerlink" title="添加到 Alfred"></a>添加到 Alfred</h3><p>新建一个Workflow，设置快捷键，然后把代码拷贝到 Run Script，第三个是获取打印的结果。</p>
<p><img src="http://img.labmain.com/2016-11-07-071733.jpg" alt=""></p>
<p>获取到 Python 打印的 字符串到剪贴板</p>
<p><img src="http://img.labmain.com/2016-11-07-071755.jpg" alt=""></p>
<h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><p><img src="http://img.labmain.com/2016-11-07-2016-04-07-2016-04-07%2014_49_51.gif" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/06/Proxifier_with_SS_agent_designated_procedures/" itemprop="url">
                  Proxifier配合SS代理指定程序
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-06T20:22:17+08:00" content="2016-04-06">
              2016-04-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/开发环境/" itemprop="url" rel="index">
                    <span itemprop="name">开发环境</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Proxifier-简介"><a href="#Proxifier-简介" class="headerlink" title="Proxifier 简介"></a>Proxifier 简介</h4><p>Proxifier是一款功能非常强大的socks5客户端，可以让不支持通过代理服务器工作的网络程序能通过https或socks代理或代理链。支持socks4，socks5，http代理协议，支持tcp，udp协议，可以指定端口，指定ip，指定程序等运行模式，兼容性非常好。</p>
<h4 id="配合-ShadowSocks-代理指定程序"><a href="#配合-ShadowSocks-代理指定程序" class="headerlink" title="配合 ShadowSocks 代理指定程序"></a>配合 ShadowSocks 代理指定程序</h4><ol>
<li><p>前提是 ShadowSocks 已经配置好，然后去<a href="https://www.proxifier.com/" target="_blank" rel="external">官网</a>下载 Proxifier 安装。</p>
</li>
<li><p>添加一个ShadowSocks的本地代理</p>
<p> <img src="http://img.labmain.com/2016-11-07-071615.jpg" alt=""></p>
<p> <img src="http://img.labmain.com/2016-11-07-071634.jpg" alt=""></p>
</li>
</ol>
<ol>
<li><p>添加一个规则</p>
<p> <img src="http://img.labmain.com/2016-11-07-071656.jpg" alt=""></p>
<p> <img src="http://img.labmain.com/2016-11-07-071703.jpg" alt=""></p>
</li>
</ol>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><p>经过上面的操作就可以通过 ShadowSocks 的 1080 端口走代理了。不过需要注意的是，这个软件默认是全部走代理的，记得修改一下：<br>    <img src="http://img.labmain.com/2016-11-07-071715.jpg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/22/HTTP_Message/" itemprop="url">
                  HTTP 报文
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-22T20:01:52+08:00" content="2016-03-22">
              2016-03-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/网络知识/" itemprop="url" rel="index">
                    <span itemprop="name">网络知识</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="媒体类型"><a href="#媒体类型" class="headerlink" title="媒体类型"></a>媒体类型</h2><p>为了区分不同数据类型，HTTP 给每种通过 Web 传输的对象打上了名为 <code>MIME</code> 类型的数据格式标签，当 Web 浏览器从服务器中取出一个对象时，会去查看相关的</p>
<h4 id="常见的-MIME-类型："><a href="#常见的-MIME-类型：" class="headerlink" title="常见的 MIME 类型："></a>常见的 MIME 类型：</h4><ul>
<li>HTML 格式的文本文档由 <code>text/html</code> 类型来标记。</li>
<li>普通的 ASCII 文本是有 <code>text/plain</code> 类型来标记。</li>
<li>JPEG 图片为 <code>image/jpeg</code> 类型</li>
<li>GIF 图片为 <code>image/gif</code> 类型</li>
<li>Apple QuickTime 视频为 <code>video/quicktime</code> 类型</li>
<li>微软的 PowerPoint 演示文件为 <code>application/vnd.ms-powerpoint</code> 类型。</li>
</ul>
<h2 id="HTTP-报文"><a href="#HTTP-报文" class="headerlink" title="HTTP 报文"></a>HTTP 报文</h2><p>一个 HTTP 事务由一条（客户端发往服务器的）请求命令和一个（从服务器返回给客户端的）响应结果组成。这种通信是通过名为 HTTP 报文（HTTP message）的格式化数据块进行的如图所示：<br><img src="http://img.labmain.com/2016-11-07-071557.jpg" alt=""></p>
<h4 id="报文实例"><a href="#报文实例" class="headerlink" title="报文实例"></a>报文实例</h4><p>浏览器发送了一条 HTTP 请求报文。这条请求的起始行中有一个 GET 命令，且本地资源为 <code>/tools.html</code> 。 这条请求说明它使用的是 1.0 版的 HTTP 协议。 请求报文没有主体，因为从服务器上 GET 一个简单的文档不需要请求数据。</p>
<p>服务器会回送一条 HTTP 响应报文。这条响应中包含了 HTTP 的版本号(HTTP/1.0)、 一个成功状态码(200)、一个描述性的原因短语(OK), 以及一块响应首部字段, 在所有这些内容之后跟着包含了所请求文档的响应主体。 <code>Content-Length</code> 首部说明了响应主体的长度, <code>Content-Type</code> 首部说明了文档的 MIME 类型。<br><img src="http://img.labmain.com/2016-11-07-071604.jpg" alt=""></p>
<h4 id="解析实例"><a href="#解析实例" class="headerlink" title="解析实例"></a>解析实例</h4><ol>
<li><p><strong>请求</strong></p>
<ul>
<li>请求行：包含了请求方法、请求资源路径、HTTP 协议版本<br>  <code>GET /tools.html  HTTP/1.1</code></li>
<li><p>请求头：包含了对客户端的环境描述、客户端请求的主机地址等信息</p>
  <figure class="highlight html"><table><tr><td class="code"><pre><div class="line">Host: www.joes-hardware.com     // 客户端想访问的服务器主机地址</div><div class="line">User-Agent: Mozilla/4.75 (Win98; U) </div><div class="line">// 客户端的类型，客户端的软件环境</div><div class="line">Accept: text/html, image/gif, image/jpeg     // 客户端所能接收的数据类型</div><div class="line">Accept-Language: en     // 客户端的语言环境</div><div class="line">Accept-Encoding: gzip     // 客户端支持的数据压缩格式</div></pre></td></tr></table></figure>
</li>
<li><p>请求体：客户端发给服务器的具体数据，比如文件数据</p>
</li>
</ul>
</li>
<li><p><strong>响应</strong>：服务器返回客户端想要的数据</p>
<ul>
<li>客户端向服务器发送请求，服务器应当做出响应，即返回数据给客户端</li>
<li><p>HTTP 协议规定：1个完整的响应包含以下内容：</p>
<ul>
<li><p>状态行：包含了 HTTP 协议版本、状态码、状态英文名称</p>
<p>  <code>HTTP/1.1 200 OK</code></p>
</li>
<li><p>响应头：包含了对服务器的描述、对返回数据的描述</p>
  <figure class="highlight html"><table><tr><td class="code"><pre><div class="line">Server: Apache-Coyote/1.1         // 服务器的类型</div><div class="line">Content-Type: image/jpeg         // 返回数据的类型</div><div class="line">Content-Length: 56811         // 返回数据的长度</div><div class="line">Date: Mon, 23 Jun 2014 12:54:52 GMT    // 响应的时间</div></pre></td></tr></table></figure>
</li>
<li><p>实体内容：服务器返回给客户端的具体数据，比如文件数据</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="HTTP-报文包括以下是三个部分"><a href="#HTTP-报文包括以下是三个部分" class="headerlink" title="HTTP 报文包括以下是三个部分"></a>HTTP 报文包括以下是三个部分</h4><ul>
<li><p><strong>起始行</strong></p>
<p>  报文的第一行就是起始行,在请求报文中用来说明要做些什么, 在响应报文中说 明出现了什么情况。</p>
</li>
<li><p><strong>首部字段</strong></p>
<p>  起始行后面有零个或多个首部字段。 每个首部字段都包含一个名字和一个值, 为 了便于解析, 两者之间用冒号(:)来分隔。 首部以一个空行结束。 添加一个首 部字段和添加新行一样简单。</p>
</li>
<li><p><strong>主体</strong></p>
<p>  空行之后就是可选的报文主体了,其中包含了所有类型的数据。 请求主体中包括 了要发送给 Web 服务器的数据;响应主体中装载了要返回给客户端的数据。 起 始行和首部都是文本形式且都是结构化的, 而主体则不同, 主体中可以包含任意 的二进制数据(比如图片、视频、音轨、软件程序)。 当然, 主体中也可以包含 文本。</p>
</li>
</ul>
<blockquote>
<p>整理自《HTTP 权威指南》</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/16/A_Very_Good_Download_Tools_Aria2/" itemprop="url">
                  MAC下载利器—Aria2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-16T11:37:20+08:00" content="2016-03-16">
              2016-03-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/开发环境/" itemprop="url" rel="index">
                    <span itemprop="name">开发环境</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h2><p>要安装Aria2其实有好几种方法，在此介绍算是最简单的一种，因为其他方法都要自行编译，比较麻烦，而这次介绍的方法只需直接使用 Homebrew 命令行安装即可，一条命令就全部自动搞掂。不过如果你从没安装过 Homebrew，那就要再折腾一下先，其实 Homebrew 是一个功能强大的软件安装包，你可以通过它安装很多流行的开源免费软件。至于如何安装 Homebrew，可以参考这里的教程。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">brew install aria2</div></pre></td></tr></table></figure>
<h2 id="2-设置配置文件"><a href="#2-设置配置文件" class="headerlink" title="2. 设置配置文件"></a>2. 设置配置文件</h2><p>aria2有两种下载模式：一种是直接命令行模式下载，平时可以用用。另一种是RPC模式，在这种模式下aria2启动后会在后台安静的等待下载请求，下载完成后也仍然后安全的驻留在后台不会自动退出。本文使用RPC模式，用以下配置文件来配置此模式(此配置文件参考1),此配置文件保存在<code>~/.aria2/aria2.conf</code>，如果 没有，自行创建。<br>用文本编辑器打开(如果没有自行创建) aria2.conf，将 雪月秋水君 提供的以下配置直接拷贝进去：<br><strong>（注意修改路径名）</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#用户名</div><div class="line">#rpc-user=user</div><div class="line">#密码</div><div class="line">#rpc-passwd=passwd</div><div class="line">#上面的认证方式不建议使用,建议使用下面的token方式</div><div class="line">#设置加密的密钥</div><div class="line">#rpc-secret=token</div><div class="line">#允许rpc</div><div class="line">enable-rpc=true</div><div class="line">#允许所有来源, web界面跨域权限需要</div><div class="line">rpc-allow-origin-all=true</div><div class="line">#允许外部访问，false的话只监听本地端口</div><div class="line">rpc-listen-all=true</div><div class="line">#RPC端口, 仅当默认端口被占用时修改</div><div class="line">#rpc-listen-port=6800</div><div class="line">#最大同时下载数(任务数), 路由建议值: 3</div><div class="line">max-concurrent-downloads=5</div><div class="line">#断点续传</div><div class="line">continue=true</div><div class="line">#同服务器连接数</div><div class="line">max-connection-per-server=5</div><div class="line">#最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要</div><div class="line">min-split-size=10M</div><div class="line">#单文件最大线程数, 路由建议值: 5</div><div class="line">split=10</div><div class="line">#下载速度限制</div><div class="line">max-overall-download-limit=0</div><div class="line">#单文件速度限制</div><div class="line">max-download-limit=0</div><div class="line">#上传速度限制</div><div class="line">max-overall-upload-limit=0</div><div class="line">#单文件速度限制</div><div class="line">max-upload-limit=0</div><div class="line">#断开速度过慢的连接</div><div class="line">#lowest-speed-limit=0</div><div class="line">#验证用，需要1.16.1之后的release版本</div><div class="line">#referer=*</div><div class="line">#文件保存路径, 默认为当前启动位置</div><div class="line">dir=/Users/xxx/Downloads</div><div class="line">#文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本</div><div class="line">#disk-cache=0</div><div class="line">#另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)</div><div class="line">#enable-mmap=true</div><div class="line">#文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长</div><div class="line">#所需时间 none &lt; falloc ? trunc « prealloc, falloc和trunc需要文件系统和内核支持</div><div class="line">file-allocation=prealloc</div></pre></td></tr></table></figure>
<p>默认下载路径的「/Users/xxx/Downloads」可以改为任何你想要的绝对路径。此处写为 Downloads 目录，xxx 请自行替换成你的 Mac 用户名，然后保存，退出编辑器。</p>
<h2 id="3-下载模式一：命令操作（这里直接忽略）"><a href="#3-下载模式一：命令操作（这里直接忽略）" class="headerlink" title="3. 下载模式一：命令操作（这里直接忽略）"></a>3. 下载模式一：命令操作（这里直接忽略）</h2><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Download from WEB:</div><div class="line">  aria2c http://example.org/mylinux.iso</div><div class="line">Download from 2 sources:</div><div class="line">  aria2c http://a/f.iso ftp://b/f.iso</div><div class="line">Download using 2 connections per host:</div><div class="line">  aria2c -x2 http://a/f.iso</div><div class="line">BitTorrent:</div><div class="line">  aria2c http://example.org/mylinux.torrent</div><div class="line">BitTorrent Magnet URI:</div><div class="line">  aria2c &apos;magnet:?xt=urn:btih:ds2io3u2oj309xd&apos;</div><div class="line">Metalink:</div><div class="line">  aria2c http://example.org/mylinux.metalink</div><div class="line">Download URIs found in text file:</div><div class="line">  aria2c -i uris.txt</div><div class="line">下载 aria2 的 service启动脚本 及加入开机自启动项</div><div class="line">  sudo cd /etc/systemd/system/</div><div class="line">  wget https://github.com/bostoneboy/raspberry_pi_stuff/raw/master/system/aria2c.service</div><div class="line">  systemctl enable aria2c.service</div><div class="line">以进程的方式启动aria2</div><div class="line">  systemctl start aria2c.service</div></pre></td></tr></table></figure>
<p>更多官方公布的详细命令指南如下：<br>    <a href="http://aria2.sourceforge.net/manual/en/html/aria2c.html" target="_blank" rel="external">http://aria2.sourceforge.net/manual/en/html/aria2c.html</a></p>
<h2 id="4-下载模式二：RPC-模式"><a href="#4-下载模式二：RPC-模式" class="headerlink" title="4. 下载模式二：RPC 模式"></a>4. 下载模式二：RPC 模式</h2><p>启动命令格式 ：<code>aria2c --conf-path=&lt;PATH&gt; -D</code><br>PATH必须是绝对路径，-D表示使Aria2在后台运行，即使关闭终端也不会停止运行</p>
<p>在终端输入<code>aria2c --conf-path=&quot;/Users/用户名/.aria2/aria2.conf&quot; -D</code>，然后 aria2 就启动了，</p>
<h2 id="5-如何进行下载操作？"><a href="#5-如何进行下载操作？" class="headerlink" title="5. 如何进行下载操作？"></a>5. 如何进行下载操作？</h2><ul>
<li><p>这时候你要下载文件时，还必须将文件下载链接转换成  Aria2的格式，然后再用命令行进行下载，过程比较麻烦和复杂，这里就不多说了，因为我介绍的方法可让这过程非常简单。以下推荐一个非常好用的系统，其实就是一个 Html + JS 写的网站，其整合了 Aria2 的服务，做了一个漂亮的管理界面，其下载地址：</p>
<pre><code>https://github.com/ziahamza/webui-Aria2
</code></pre></li>
<li><p>下载后也不需创建任何 web 服务器，只需直接双击运行 index.html 方便即可，当然前提是你已启动了 Aria2 服务（运行上面的命令行），你可以直接在 webui-aria2 里面进行添加下载链接，然后就可以看到下载的状态速度和时间了。</p>
</li>
</ul>
<h2 id="6-百度网盘下载"><a href="#6-百度网盘下载" class="headerlink" title="6. 百度网盘下载"></a>6. 百度网盘下载</h2><ul>
<li><p>需要下载一个chrome插件：</p>
<p>  <a href="https://chrome.google.com/webstore/detail/baiduexporter/mjaenbjdjmgolhoafkohbhhbaiedbkno" target="_blank" rel="external">https://chrome.google.com/webstore/detail/baiduexporter/mjaenbjdjmgolhoafkohbhhbaiedbkno</a></p>
</li>
<li><p>使用方法：打开一个百度网盘 下载地址，导出配置——ara2 RPC，就会自动下载</p>
</li>
</ul>
<h2 id="7-设置开机自启动-Aria2"><a href="#7-设置开机自启动-Aria2" class="headerlink" title="7. 设置开机自启动 Aria2"></a>7. 设置开机自启动 Aria2</h2><p>点击 Mac 左上角的苹果 logo，进入系统偏好设置。点击左下倒数第二个的「用户与群组」，再点击上面的「登录项」。此时，在终端输入：<code>open /usr/local/aria2/bin/</code>会弹出一个窗口，将里面的aria2c 文件拖入到刚刚的「登录项」窗口内，将它打勾。OK，这样就能正常的开机启动啦。</p>
<p>如果你想关掉后台的 aria2，可以到活动监视器中找到 aria2c 杀掉，也可以在终端输入<code>kill aria2</code>之后按 Tab 键，aria2 会自动变成进程号，回车即可杀掉它。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://img.labmain.com/2016-10-28-default_avatar.jpg"
               alt="Labmen001" />
          <p class="site-author-name" itemprop="name">Labmen001</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Labmen001</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

  


</body>
</html>
